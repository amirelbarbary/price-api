<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ù…ÙŠØ± Ø§Ù„Ø®Ø·ÙŠØ± - Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ø°ÙƒÙŠØ©</title>
    <!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø§Øª React Ùˆ ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- ØªØ­Ù…ÙŠÙ„ Ù…ÙƒØªØ¨Ø© Babel Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† JSX Ø¥Ù„Ù‰ JavaScript -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- ØªØ­Ù…ÙŠÙ„ Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
            color: #333;
            font-size: 14px;
        }
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            border-bottom: 3px solid #5a67d8;
        }
        h1 {
            font-size: 32px;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        .main-menu {
            padding: 40px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .menu-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #dee2e6;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            border-color: #667eea;
        }
        .menu-item h2 {
            font-size: 22px;
            color: #495057;
            margin-bottom: 15px;
        }
        .menu-item p {
            color: #6c757d;
            font-size: 16px;
        }
        .calculator {
            display: none;
            padding: 20px;
        }
        .project-title {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }
        .project-title input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        button {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 12px;
        }
        .import-btn { background: #17a2b8; color: white; }
        .export-btn { background: #28a745; color: white; }
        .print-btn { background: #6f42c1; color: white; }
        .reset-btn { background: #dc3545; color: white; }
        button:hover { transform: translateY(-2px); }
        .controls {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            background: #f1f3f5;
            font-size: 13px;
        }
        .tax-toggle {
            display: flex;
            align-items: center;
            font-weight: bold;
            color: #495057;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 45px;
            height: 22px;
            margin: 0 8px;
        }
        .switch input { opacity: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc;
            transition: .3s;
            border-radius: 22px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: .3s;
            border-radius: 50%;
        }
        input:checked + .slider { background: #667eea; }
        input:checked + .slider:before { transform: translateX(23px); }
        .add-btn {
            background: #28a745;
            color: white;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 6px;
            text-align: center;
        }
        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) { background: #f8f9fa; }
        tr:hover { background: #e3f2fd; }
        input, select {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 12px;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 4px 6px;
            border-radius: 4px;
            font-size: 11px;
        }
        .totals-display {
            margin: 20px 0;
            padding: 15px;
            background: #fff3cd;
            border-radius: 8px;
            font-size: 13px;
        }
        .totals-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 10px;
        }
        .total-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: #e9ecef;
            border-radius: 6px;
        }
        .total-label {
            font-weight: bold;
            color: #495057;
            min-width: 180px;
        }
        .total-value {
            text-align: right;
            direction: ltr;
            font-weight: bold;
            color: #28a745;
        }
        .suggestions {
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            width: 350px;
            display: none;
        }
        .suggestion-item {
            padding: 10px 12px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .suggestion-item:hover {
            background: #e9ecef;
        }
        .suggestion-item:last-child {
            border-bottom: none;
        }
        .suggestion-name {
            font-weight: bold;
            color: #333;
        }
        .suggestion-price {
            color: #28a745;
            font-weight: bold;
        }
        .suggestion-range {
            color: #6c757d;
            font-size: 11px;
        }
        .suggestion-source {
            color: #007bff;
            font-size: 10px;
        }
        .ai-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDc9X5v7Y7Z3X8X9X0X1X2X3X4X5X6X7X8",
            authDomain: "price-suggestions-db.firebaseapp.com",
            projectId: "price-suggestions-db",
            storageBucket: "price-suggestions-db.appspot.com",
            messagingSenderId: "1234567890",
            appId: "1:1234567890:web:abcdef1234567890"
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Ø¯Ø§Ù„Ø© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª Ø¹Ø±Ø¨ÙŠØ©
        function numberToArabicWords(number) {
            if (number === 0) return 'ØµÙØ±';
            const ones = ['', 'ÙˆØ§Ø­Ø¯', 'Ø§Ø«Ù†Ø§Ù†', 'Ø«Ù„Ø§Ø«Ø©', 'Ø£Ø±Ø¨Ø¹Ø©', 'Ø®Ù…Ø³Ø©', 'Ø³ØªØ©', 'Ø³Ø¨Ø¹Ø©', 'Ø«Ù…Ø§Ù†ÙŠØ©', 'ØªØ³Ø¹Ø©',
                         'Ø¹Ø´Ø±Ø©', 'Ø£Ø­Ø¯ Ø¹Ø´Ø±', 'Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±', 'Ø«Ù„Ø§Ø«Ø© Ø¹Ø´Ø±', 'Ø£Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±', 'Ø®Ù…Ø³Ø© Ø¹Ø´Ø±', 
                         'Ø³ØªØ© Ø¹Ø´Ø±', 'Ø³Ø¨Ø¹Ø© Ø¹Ø´Ø±', 'Ø«Ù…Ø§Ù†ÙŠØ© Ø¹Ø´Ø±', 'ØªØ³Ø¹Ø© Ø¹Ø´Ø±'];
            const tens = ['', '', 'Ø¹Ø´Ø±ÙˆÙ†', 'Ø«Ù„Ø§Ø«ÙˆÙ†', 'Ø£Ø±Ø¨Ø¹ÙˆÙ†', 'Ø®Ù…Ø³ÙˆÙ†', 'Ø³ØªÙˆÙ†', 'Ø³Ø¨Ø¹ÙˆÙ†', 'Ø«Ù…Ø§Ù†ÙˆÙ†', 'ØªØ³Ø¹ÙˆÙ†'];
            const hundreds = ['', 'Ù…Ø§Ø¦Ø©', 'Ù…Ø¦ØªØ§Ù†', 'Ø«Ù„Ø§Ø«Ù…Ø§Ø¦Ø©', 'Ø£Ø±Ø¨Ø¹Ù…Ø§Ø¦Ø©', 'Ø®Ù…Ø³Ù…Ø§Ø¦Ø©', 'Ø³ØªÙ…Ø§Ø¦Ø©', 'Ø³Ø¨Ø¹Ù…Ø§Ø¦Ø©', 'Ø«Ù…Ø§Ù†Ù…Ø§Ø¦Ø©', 'ØªØ³Ø¹Ù…Ø§Ø¦Ø©'];
            const units = ['', 'Ø£Ù„Ù', 'Ù…Ù„ÙŠÙˆÙ†', 'Ù…Ù„ÙŠØ§Ø±'];
            
            function convertThreeDigits(num) {
                let result = '';
                const hundred = Math.floor(num / 100);
                const remainder = num % 100;
                
                if (hundred > 0) {
                    result += hundreds[hundred];
                    if (remainder > 0) result += ' Ùˆ ';
                }
                
                if (remainder > 0) {
                    if (remainder < 20) {
                        result += ones[remainder];
                    } else {
                        const ten = Math.floor(remainder / 10);
                        const one = remainder % 10;
                        if (one > 0) result += ones[one] + ' Ùˆ ';
                        result += tens[ten];
                    }
                }
                return result;
            }
            
            let result = '';
            let unitIndex = 0;
            let tempNumber = Math.floor(number);
            
            while (tempNumber > 0) {
                const threeDigits = tempNumber % 1000;
                if (threeDigits > 0) {
                    let part = convertThreeDigits(threeDigits);
                    if (unitIndex > 0) {
                        part += ' ' + units[unitIndex];
                        if (threeDigits === 1 && unitIndex === 1) part = units[unitIndex];
                    }
                    result = result ? part + ' Ùˆ ' + result : part;
                }
                tempNumber = Math.floor(tempNumber / 1000);
                unitIndex++;
            }
            
            return result;
        }

        function formatArabicCurrency(amount) {
            const wholePart = Math.floor(amount);
            const decimalPart = Math.round((amount - wholePart) * 100);
            let result = '';
            
            if (wholePart > 0) {
                result += numberToArabicWords(wholePart) + ' Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ';
            } else {
                result = 'ØµÙØ± Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ';
            }
            
            if (decimalPart > 0) {
                result += ' Ùˆ ' + numberToArabicWords(decimalPart) + ' Ù‡Ù„Ù„Ø©';
            }
            
            return result;
        }

        // Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        function App() {
            const [currentCalculator, setCurrentCalculator] = React.useState(null);
            const [projectName, setProjectName] = React.useState('');
            const [taxRate, setTaxRate] = React.useState(0.15);
            const [taxMode, setTaxMode] = React.useState(false);
            const [rows, setRows] = React.useState([]);
            const [suggestions, setSuggestions] = React.useState([]);
            const [showSuggestions, setShowSuggestions] = React.useState(false);
            const [suggestionsPosition, setSuggestionsPosition] = React.useState({ top: 0, right: 0 });
            
            // Ø¥Ø¶Ø§ÙØ© ØµÙ Ø¬Ø¯ÙŠØ¯
            const addRow = () => {
                const newRow = {
                    id: Date.now(),
                    item: '',
                    unit: '',
                    quantity: 0,
                    year1: 0,
                    year2: 0,
                    year3: 0,
                    price: 0,
                    tax: false
                };
                setRows([...rows, newRow]);
            };
            
            // Ø­Ø°Ù ØµÙ
            const deleteRow = (id) => {
                if (rows.length > 1) {
                    setRows(rows.filter(row => row.id !== id));
                }
            };
            
            // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙ
            const updateRow = (id, field, value) => {
                setRows(rows.map(row => {
                    if (row.id === id) {
                        const updatedRow = { ...row, [field]: value };
                        
                        // Ø¥Ø°Ø§ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ÙƒÙ…ÙŠØ©ØŒ Ù†ÙˆØ²Ø¹Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù†ÙˆØ§Øª
                        if (field === 'quantity') {
                            const qty = parseFloat(value) || 0;
                            const yearsCount = currentCalculator || 3;
                            const share = (qty / yearsCount).toFixed(2);
                            updatedRow.year1 = share;
                            updatedRow.year2 = share;
                            updatedRow.year3 = share;
                        }
                        
                        return updatedRow;
                    }
                    return row;
                }));
            };
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù„Ù„ØµÙ
            const calculateRowTotal = (row) => {
                const price = parseFloat(row.price) || 0;
                const quantity = parseFloat(row.quantity) || 0;
                const isTaxExcluded = row.tax;
                
                let basePrice, taxAmount;
                
                if (isTaxExcluded) {
                    basePrice = price;
                    taxAmount = price * taxRate;
                } else {
                    basePrice = price / (1 + taxRate);
                    taxAmount = price - basePrice;
                }
                
                const totalPriceEx = quantity * basePrice;
                const totalTax = totalPriceEx * taxRate;
                const totalPriceInc = totalPriceEx + totalTax;
                
                return {
                    individualTax: taxAmount.toFixed(2),
                    totalEx: totalPriceEx.toFixed(2),
                    totalTax: totalPriceTax.toFixed(2),
                    totalInc: totalPriceInc.toFixed(2)
                };
            };
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            const calculateTotals = () => {
                let totalQty = 0, totalEx = 0, totalTax = 0, totalInc = 0, totalIndTax = 0;
                
                rows.forEach(row => {
                    const totals = calculateRowTotal(row);
                    totalQty += parseFloat(row.quantity) || 0;
                    totalEx += parseFloat(totals.totalEx) || 0;
                    totalTax += parseFloat(totals.totalTax) || 0;
                    totalInc += parseFloat(totals.totalInc) || 0;
                    totalIndTax += parseFloat(totals.individualTax) || 0;
                });
                
                return {
                    totalQty,
                    totalEx,
                    totalTax,
                    totalInc,
                    totalIndTax
                };
            };
            
            // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Firebase
            const getPriceSuggestions = async (searchTerm, unit) => {
                try {
                    // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù†Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Firebase
                    const querySnapshot = await db.collection('prices')
                        .where('item', '>=', searchTerm)
                        .where('item', '<=', searchTerm + '\uf8ff')
                        .get();
                    
                    const results = [];
                    querySnapshot.forEach((doc) => {
                        results.push(doc.data());
                    });
                    
                    // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø¬Ø¯ Ù†ØªØ§Ø¦Ø¬ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ©
                    if (results.length === 0) {
                        const mockDatabase = {
                            "Ø§Ø³Ù…Ù†Øª": { "ÙƒÙŠÙ„Ùˆ": 4.5, "Ø·Ù†": 4500 },
                            "Ø­Ø¯ÙŠØ¯": { "ÙƒÙŠÙ„Ùˆ": 18, "Ø·Ù†": 18000 },
                            "Ø±Ù…Ù„": { "Ù…ØªØ± Ù…ÙƒØ¹Ø¨": 120, "Ø·Ù†": 12000 },
                            "Ø¨Ù„Ø§Ø·": { "Ù…ØªØ± Ù…Ø±Ø¨Ø¹": 35 },
                            "Ø£Ù†Ø§Ø¨ÙŠØ¨": { "Ù…ØªØ±": 15 },
                            "Ø£Ø³Ù„Ø§Ùƒ": { "Ù…ØªØ±": 8 },
                            "Ù„Ù…Ø¨Ø©": { "ÙˆØ­Ø¯Ø©": 18 },
                            "Ù…ÙƒÙŠÙ": { "ÙˆØ­Ø¯Ø©": 1200 }
                        };
                        
                        Object.keys(mockDatabase).forEach(item => {
                            if (item.includes(searchTerm)) {
                                const itemData = mockDatabase[item];
                                Object.keys(itemData).forEach(itemUnit => {
                                    if (!unit || unit === itemUnit) {
                                        results.push({
                                            item: `${item} (${itemUnit})`,
                                            price: itemData[itemUnit],
                                            unit: itemUnit,
                                            source: "Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ©",
                                            updated: new Date().toISOString()
                                        });
                                    }
                                });
                            }
                        });
                    }
                    
                    return results;
                } catch (error) {
                    console.error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø³Ø¹Ø±:", error);
                    return [];
                }
            };
            
            // Ø¹Ø±Ø¶ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
            const showPriceSuggestions = async (searchTerm, unit, inputElement) => {
                if (searchTerm.trim().length > 1) {
                    const results = await getPriceSuggestions(searchTerm, unit);
                    setSuggestions(results);
                    
                    // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
                    const rect = inputElement.getBoundingClientRect();
                    setSuggestionsPosition({
                        top: rect.bottom + window.scrollY,
                        right: window.innerWidth - rect.right
                    });
                    
                    setShowSuggestions(true);
                } else {
                    setShowSuggestions(false);
                }
            };
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù‚ØªØ±Ø§Ø­
            const selectSuggestion = (suggestion, rowId) => {
                setRows(rows.map(row => {
                    if (row.id === rowId) {
                        return {
                            ...row,
                            item: suggestion.item,
                            unit: suggestion.unit,
                            price: suggestion.price
                        };
                    }
                    return row;
                }));
                setShowSuggestions(false);
            };
            
            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„ÙƒÙ…ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù†ÙˆØ§Øª
            const distributeQuantity = (rowId) => {
                const row = rows.find(r => r.id === rowId);
                if (!row) return;
                
                const qty = parseFloat(row.quantity) || 0;
                const yearsCount = currentCalculator || 3;
                const share = (qty / yearsCount).toFixed(2);
                
                updateRow(rowId, 'year1', share);
                updateRow(rowId, 'year2', share);
                updateRow(rowId, 'year3', share);
            };
            
            // Ø¹Ø±Ø¶ Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹ÙŠÙ†Ø©
            const showCalculator = (yearsCount) => {
                setCurrentCalculator(yearsCount);
                // Ø¥Ø¶Ø§ÙØ© ØµÙ ÙØ§Ø±Øº Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØµÙÙˆÙ
                if (rows.length === 0) {
                    addRow();
                }
            };
            
            // Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
            const resetCalculator = () => {
                if (window.confirm("Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ØŸ")) {
                    setRows([]);
                    setProjectName('');
                    addRow();
                }
            };
            
            // ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel
            const exportToExcel = () => {
                // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù†Ø³ØªØ®Ø¯Ù… Ù…ÙƒØªØ¨Ø© xlsx
                alert("Ù…ØªÙˆÙØ± ÙÙŠ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„");
            };
            
            // Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª
            const totals = calculateTotals();
            
            return (
                <div className="container">
                    <header>
                        <h1>Ø£Ù…ÙŠØ± Ø§Ù„Ø®Ø·ÙŠØ±</h1>
                        <div className="subtitle">Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø© Ù„Ø¬Ø¯ÙˆÙ„ ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ - Ù…ØªØµÙ„Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
                    </header>
                    
                    {!currentCalculator ? (
                        <div className="main-menu">
                            <div className="menu-item" onClick={() => showCalculator(2)}>
                                <h2>Ø¬Ø¯ÙˆÙ„ Ø¨Ø³Ù†ØªÙŠÙ†</h2>
                                <p>Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ ÙƒÙ…ÙŠØ§Øª Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¯ØªÙ‡ Ø³Ù†ØªÙŠÙ†</p>
                            </div>
                            <div className="menu-item" onClick={() => showCalculator(3)}>
                                <h2>Ø¬Ø¯ÙˆÙ„ Ø¨Ø«Ù„Ø§Ø« Ø³Ù†ÙˆØ§Øª</h2>
                                <p>Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ ÙƒÙ…ÙŠØ§Øª Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¯ØªÙ‡ Ø«Ù„Ø§Ø« Ø³Ù†ÙˆØ§Øª</p>
                            </div>
                            <div className="menu-item" onClick={() => showCalculator(4)}>
                                <h2>Ø¬Ø¯ÙˆÙ„ Ø¨Ø£Ø±Ø¨Ø¹ Ø³Ù†ÙˆØ§Øª</h2>
                                <p>Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ ÙƒÙ…ÙŠØ§Øª Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¯ØªÙ‡ Ø£Ø±Ø¨Ø¹ Ø³Ù†ÙˆØ§Øª</p>
                            </div>
                            <div className="menu-item" onClick={() => showCalculator(5)}>
                                <h2>Ø¬Ø¯ÙˆÙ„ Ø¨Ø®Ù…Ø³ Ø³Ù†ÙˆØ§Øª</h2>
                                <p>Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ ÙƒÙ…ÙŠØ§Øª Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¯ØªÙ‡ Ø®Ù…Ø³ Ø³Ù†ÙˆØ§Øª</p>
                            </div>
                        </div>
                    ) : (
                        <div className="calculator">
                            <div className="project-title">
                                <input 
                                    type="text" 
                                    value={projectName}
                                    onChange={(e) => setProjectName(e.target.value)}
                                    placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"
                                />
                                <div className="action-buttons">
                                    <button className="import-btn">ğŸ“ Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
                                    <button className="export-btn" onClick={exportToExcel}>ğŸ’¾ ØªØµØ¯ÙŠØ±</button>
                                    <button className="print-btn">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
                                    <button className="reset-btn" onClick={resetCalculator}>ğŸ—‘ï¸ Ù…Ø³Ø­</button>
                                </div>
                            </div>
                            
                            <div className="controls">
                                <div className="tax-toggle">
                                    <span>Ø§Ù„Ø³Ø¹Ø± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</span>
                                    <label className="switch">
                                        <input 
                                            type="checkbox" 
                                            checked={taxMode}
                                            onChange={(e) => setTaxMode(e.target.checked)}
                                        />
                                        <span className="slider"></span>
                                    </label>
                                    <span>Ø§Ù„Ø³Ø¹Ø± ØºÙŠØ± Ø´Ø§Ù…Ù„</span>
                                </div>
                                <button className="add-btn" onClick={addRow}>â• Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</button>
                            </div>
                            
                            <div className="table-container">
                                <table className="calculator-table">
                                    <thead>
                                        <tr className="header-row">
                                            <th width="2%">Ù…</th>
                                            <th width="18%">Ø§Ù„Ø¨Ù†Ø¯</th>
                                            <th width="7%">ÙˆØ­Ø¯Ø© Ø§Ù„Ù‚ÙŠØ§Ø³</th>
                                            <th width="8%">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</th>
                                            <th width="6%">Ø§Ù„Ø³Ù†Ø© 1</th>
                                            <th width="6%">Ø§Ù„Ø³Ù†Ø© 2</th>
                                            <th width="6%">Ø§Ù„Ø³Ù†Ø© 3</th>
                                            <th width="8%">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥ÙØ±Ø§Ø¯ÙŠ</th>
                                            <th width="5%">Ø¶Ø±ÙŠØ¨Ø©</th>
                                            <th width="9%">Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙØ±Ø¯ÙŠ</th>
                                            <th width="10%">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (ØºÙŠØ± Ø´Ø§Ù…Ù„)</th>
                                            <th width="10%">Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                                            <th width="10%">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø´Ø§Ù…Ù„)</th>
                                            <th width="2%">Ø­Ø°Ù</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {rows.map((row, index) => {
                                            const rowTotals = calculateRowTotal(row);
                                            return (
                                                <tr key={row.id}>
                                                    <td>{index + 1}</td>
                                                    <td>
                                                        <input 
                                                            type="text" 
                                                            value={row.item}
                                                            onChange={(e) => {
                                                                updateRow(row.id, 'item', e.target.value);
                                                                showPriceSuggestions(e.target.value, row.unit, e.target);
                                                            }}
                                                            placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ø¯"
                                                        />
                                                    </td>
                                                    <td>
                                                        <input 
                                                            type="text" 
                                                            value={row.unit}
                                                            onChange={(e) => {
                                                                updateRow(row.id, 'unit', e.target.value);
                                                                showPriceSuggestions(row.item, e.target.value, e.target);
                                                            }}
                                                            placeholder="Ø§Ø®ØªØ± Ø£Ùˆ Ø§ÙƒØªØ¨"
                                                        />
                                                    </td>
                                                    <td>
                                                        <input 
                                                            type="number" 
                                                            value={row.quantity}
                                                            onChange={(e) => {
                                                                updateRow(row.id, 'quantity', e.target.value);
                                                                distributeQuantity(row.id);
                                                            }}
                                                            min="0" 
                                                            step="0.01"
                                                        />
                                                    </td>
                                                    <td>
                                                        <input 
                                                            type="number" 
                                                            value={row.year1}
                                                            onChange={(e) => updateRow(row.id, 'year1', e.target.value)}
                                                            min="0" 
                                                            step="0.01"
                                                        />
                                                    </td>
                                                    <td>
                                                        <input 
                                                            type="number" 
                                                            value={row.year2}
                                                            onChange={(e) => updateRow(row.id, 'year2', e.target.value)}
                                                            min="0" 
                                                            step="0.01"
                                                        />
                                                    </td>
                                                    <td>
                                                        <input 
                                                            type="number" 
                                                            value={row.year3}
                                                            onChange={(e) => updateRow(row.id, 'year3', e.target.value)}
                                                            min="0" 
                                                            step="0.01"
                                                        />
                                                    </td>
                                                    <td>
                                                        <input 
                                                            type="number" 
                                                            value={row.price}
                                                            onChange={(e) => updateRow(row.id, 'price', e.target.value)}
                                                            min="0" 
                                                            step="0.01"
                                                        />
                                                    </td>
                                                    <td>
                                                        <label className="switch">
                                                            <input 
                                                                type="checkbox" 
                                                                checked={row.tax}
                                                                onChange={(e) => updateRow(row.id, 'tax', e.target.checked)}
                                                            />
                                                            <span className="slider"></span>
                                                        </label>
                                                    </td>
                                                    <td>{rowTotals.individualTax}</td>
                                                    <td>{rowTotals.totalEx}</td>
                                                    <td>{rowTotals.totalTax}</td>
                                                    <td>{rowTotals.totalInc}</td>
                                                    <td>
                                                        <button 
                                                            className="delete-btn" 
                                                            onClick={() => deleteRow(row.id)}
                                                        >
                                                            X
                                                        </button>
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                    </tbody>
                                </table>
                            </div>
                            
                            <div className="totals-display">
                                <div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø¨Ø§Ù„ØªÙÙ‚ÙŠØ·:</div>
                                <div className="totals-grid">
                                    <div className="total-item">
                                        <div className="total-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ§Øª:</div>
                                        <div className="total-value">
                                            {totals.totalQty.toFixed(2)} - {numberToArabicWords(totals.totalQty)}
                                        </div>
                                    </div>
                                    <div className="total-item">
                                        <div className="total-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥ÙØ±Ø§Ø¯ÙŠ:</div>
                                        <div className="total-value">
                                            {totals.totalIndTax.toFixed(2)} - {formatArabicCurrency(totals.totalIndTax)}
                                        </div>
                                    </div>
                                    <div className="total-item">
                                        <div className="total-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø¹Ø± ØºÙŠØ± Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</div>
                                        <div className="total-value">
                                            {totals.totalEx.toFixed(2)} - {formatArabicCurrency(totals.totalEx)}
                                        </div>
                                    </div>
                                    <div className="total-item">
                                        <div className="total-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</div>
                                        <div className="total-value">
                                            {totals.totalTax.toFixed(2)} - {formatArabicCurrency(totals.totalTax)}
                                        </div>
                                    </div>
                                    <div className="total-item">
                                        <div className="total-label">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø´Ø§Ù…Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</div>
                                        <div className="total-value">
                                            {totals.totalInc.toFixed(2)} - {formatArabicCurrency(totals.totalInc)}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª */}
                    {showSuggestions && (
                        <div 
                            className="suggestions"
                            style={{
                                top: suggestionsPosition.top,
                                right: suggestionsPosition.right,
                                display: 'block'
                            }}
                        >
                            {suggestions.map((suggestion, index) => (
                                <div 
                                    key={index}
                                    className="suggestion-item"
                                    onClick={() => selectSuggestion(suggestion, rows[rows.length - 1]?.id)}
                                >
                                    <div>
                                        <div className="suggestion-name">
                                            <span className="ai-badge">AI</span> {suggestion.item}
                                        </div>
                                        <div className="suggestion-price">({suggestion.price} Ø±.Ø³)</div>
                                        <div className="suggestion-source">[{suggestion.source}]</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }
        
        // Ø±Ù†Ø¯Ø± Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>